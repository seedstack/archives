<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title></title>
    <link>http://seedstack.org/archives/16.7/tags/filter/index.xml</link>
    <description>Recent content on </description>
    <generator>Hugo -- gohugo.io</generator>
    <atom:link href="http://seedstack.org/archives/16.7/tags/filter/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Web</title>
      <link>http://seedstack.org/archives/16.7/docs/seed/manual/web/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://seedstack.org/archives/16.7/docs/seed/manual/web/</guid>
      <description>&lt;p&gt;Seed has great support for Web applications whether by using its lightweight embedded Web server or in more classical
environments, when using an external Web application server. Seed provides tight integration with the Java Servlet
specification along with support for HTTP security, WebSockets, Cross-Origin Resource Sharing (CORS), or advanced
static-resources serving. To enable Web support in your project, add the &lt;code&gt;seed-web-core&lt;/code&gt; module to your classpath.&lt;/p&gt;






    
        
            
        
    

&lt;div class=&#34;tab-v2&#34;&gt;
    &lt;ul class=&#34;nav nav-tabs&#34;&gt;
        &lt;li class=&#34;active&#34;&gt;&lt;a href=&#34;#tab-org-seedstack-seed-seed-web-core-maven&#34; data-toggle=&#34;tab&#34; aria-expanded=&#34;true&#34;&gt;Maven&lt;/a&gt;&lt;/li&gt;
        &lt;li class=&#34;&#34;&gt;&lt;a href=&#34;#tab-org-seedstack-seed-seed-web-core-gradle&#34; data-toggle=&#34;tab&#34; aria-expanded=&#34;true&#34;&gt;Gradle&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
    &lt;span class=&#34;tabs-icon fa-2x fa fa-cubes pull-right&#34;&gt;&lt;/span&gt;
    &lt;div class=&#34;clear-both&#34;&gt;&lt;/div&gt;
    &lt;div class=&#34;tab-content&#34;&gt;
        &lt;div class=&#34;tab-pane in active&#34; id=&#34;tab-org-seedstack-seed-seed-web-core-maven&#34;&gt;
            &lt;pre style=&#34;margin-top: 0;&#34;&gt;&lt;code class=&#34;xml&#34;&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.seedstack.seed&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;seed-web-core&amp;lt;/artifactId&amp;gt;&lt;span id=&#34;org-seedstack-seed-seed-web-core-version&#34; style=&#34;display: none;&#34;&gt;
    &amp;lt;version&amp;gt;2.3.0&amp;lt;/version&amp;gt;&lt;/span&gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
            &lt;small class=&#34;pull-right&#34; style=&#34;color: #aaa; margin-top: -20px; margin-right: 5px;&#34;&gt;
                &lt;span id=&#34;org-seedstack-seed-seed-web-core-warn&#34; style=&#34;display: none;&#34;&gt;&lt;i class=&#34;fa fa-warning&#34; style=&#34;color: orange;&#34;&gt;&lt;/i&gt; Specifying versions manually is error-prone, use the &lt;a href=&#34;http://seedstack.org/archives/16.7/getting-started/distribution&#34;&gt;distribution&lt;/a&gt; instead.&lt;/span&gt;
                &lt;a style=&#34;cursor: pointer;&#34; id=&#34;org-seedstack-seed-seed-web-core-show&#34; onclick=&#34;$(&#39;#org-seedstack-seed-seed-web-core-version, #org-seedstack-seed-seed-web-core-warn&#39;).show(); $(&#39;#org-seedstack-seed-seed-web-core-show&#39;).hide();&#34;&gt;Show version&lt;/a&gt;
            &lt;/small&gt;
        &lt;/div&gt;
        &lt;div class=&#34;tab-pane in&#34; id=&#34;tab-org-seedstack-seed-seed-web-core-gradle&#34;&gt;
            &lt;pre style=&#34;margin-bottom: 0;&#34;&gt;&lt;code class=&#34;java&#34;&gt;dependencies {
    compile(&#34;org.seedstack.seed:seed-web-core:2.3.0&#34;)
}&lt;/code&gt;&lt;/pre&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;


&lt;div class=&#34;callout callout-info&#34;&gt;
    &lt;div style=&#34;display:table; width: 100%&#34;&gt;
        &lt;div style=&#34;display:table-cell; width: 50px; vertical-align: middle;&#34;&gt;
            
            
                &lt;i class=&#34;fa fa-info-circle icon-2x&#34; style=&#34;line-height: 30px;&#34;&gt;&lt;/i&gt;
            
            
            
        &lt;/div&gt;
        &lt;div style=&#34;display:table-cell; vertical-align: middle;&#34;&gt;
            &lt;p&gt;When deploying a Seed application in a standalone Web container, the required minimum Servlet compliance level is 2.5
though some features require a Servlet 3.0 compliance level. The presence of a &lt;code&gt;web.xml&lt;/code&gt; file is only required for servlet 2.5.&lt;/p&gt;

&lt;p&gt;All the features are available with the embedded Web server.&lt;/p&gt;

        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;h1 id=&#34;security&#34;&gt;Security&lt;/h1&gt;

&lt;p&gt;When running in a Servlet environment (Web), you might want to secure access to the application URLs by specifying
filtering patterns. To enable this feature, add the &lt;code&gt;seed-web-security&lt;/code&gt; module to your project.&lt;/p&gt;






    
        
            
        
    

&lt;div class=&#34;tab-v2&#34;&gt;
    &lt;ul class=&#34;nav nav-tabs&#34;&gt;
        &lt;li class=&#34;active&#34;&gt;&lt;a href=&#34;#tab-org-seedstack-seed-seed-web-security-maven&#34; data-toggle=&#34;tab&#34; aria-expanded=&#34;true&#34;&gt;Maven&lt;/a&gt;&lt;/li&gt;
        &lt;li class=&#34;&#34;&gt;&lt;a href=&#34;#tab-org-seedstack-seed-seed-web-security-gradle&#34; data-toggle=&#34;tab&#34; aria-expanded=&#34;true&#34;&gt;Gradle&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
    &lt;span class=&#34;tabs-icon fa-2x fa fa-cubes pull-right&#34;&gt;&lt;/span&gt;
    &lt;div class=&#34;clear-both&#34;&gt;&lt;/div&gt;
    &lt;div class=&#34;tab-content&#34;&gt;
        &lt;div class=&#34;tab-pane in active&#34; id=&#34;tab-org-seedstack-seed-seed-web-security-maven&#34;&gt;
            &lt;pre style=&#34;margin-top: 0;&#34;&gt;&lt;code class=&#34;xml&#34;&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.seedstack.seed&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;seed-web-security&amp;lt;/artifactId&amp;gt;&lt;span id=&#34;org-seedstack-seed-seed-web-security-version&#34; style=&#34;display: none;&#34;&gt;
    &amp;lt;version&amp;gt;2.3.0&amp;lt;/version&amp;gt;&lt;/span&gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
            &lt;small class=&#34;pull-right&#34; style=&#34;color: #aaa; margin-top: -20px; margin-right: 5px;&#34;&gt;
                &lt;span id=&#34;org-seedstack-seed-seed-web-security-warn&#34; style=&#34;display: none;&#34;&gt;&lt;i class=&#34;fa fa-warning&#34; style=&#34;color: orange;&#34;&gt;&lt;/i&gt; Specifying versions manually is error-prone, use the &lt;a href=&#34;http://seedstack.org/archives/16.7/getting-started/distribution&#34;&gt;distribution&lt;/a&gt; instead.&lt;/span&gt;
                &lt;a style=&#34;cursor: pointer;&#34; id=&#34;org-seedstack-seed-seed-web-security-show&#34; onclick=&#34;$(&#39;#org-seedstack-seed-seed-web-security-version, #org-seedstack-seed-seed-web-security-warn&#39;).show(); $(&#39;#org-seedstack-seed-seed-web-security-show&#39;).hide();&#34;&gt;Show version&lt;/a&gt;
            &lt;/small&gt;
        &lt;/div&gt;
        &lt;div class=&#34;tab-pane in&#34; id=&#34;tab-org-seedstack-seed-seed-web-security-gradle&#34;&gt;
            &lt;pre style=&#34;margin-bottom: 0;&#34;&gt;&lt;code class=&#34;java&#34;&gt;dependencies {
    compile(&#34;org.seedstack.seed:seed-web-security:2.3.0&#34;)
}&lt;/code&gt;&lt;/pre&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;


&lt;p&gt;This module depends upon the &lt;code&gt;seed-security-core&lt;/code&gt; module. A servlet filter is automatically added on &lt;code&gt;/*&lt;/code&gt; and, as such,
has the ability to intercept all application URLs. You can then define its interception behavior by specifying a list or
URL patterns with their associated chains of security filters.&lt;/p&gt;

&lt;h2 id=&#34;url-patterns&#34;&gt;URL patterns&lt;/h2&gt;

&lt;p&gt;Declaring URL patterns for security interception is done in configuration, by prefixing patterns with
&lt;code&gt;org.seedstack.seed.security.urls&lt;/code&gt;. This can be easily done in a Props file by defining a section:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[org.seedstack.seed.security.urls]
/some/path/specific = filter1, filter2
/some/path/** = filter3, filter4, filter5
/other/path/* = filter6
/** = fallbackFilter
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The patterns (at the left of the equal sign) are &lt;a href=&#34;https://ant.apache.org/manual/dirtasks.html#patterns&#34;&gt;Ant-style path expressions&lt;/a&gt;
relative to your Web application&amp;rsquo;s context root. The order matters as the first pattern to match the incoming request is
applied and subsequent patterns are ignored. This allows to define a catch-all default pattern at the end that will apply
if no above filters matched. When a pattern is matched, the filters (at the right of the equal sign) are applied in sequence.&lt;/p&gt;

&lt;h2 id=&#34;filters&#34;&gt;Filters&lt;/h2&gt;

&lt;p&gt;Filters can be used for various task such as:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Authentication (form, basic),&lt;/li&gt;
&lt;li&gt;Authorization (verify some permission, role),&lt;/li&gt;
&lt;li&gt;Other security checks or tasks.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can directly use built-in filters or define custom ones.&lt;/p&gt;

&lt;h3 id=&#34;built-in-filters&#34;&gt;Built-in filters&lt;/h3&gt;

&lt;p&gt;Various built-in filters are directly available by specifying their names (and eventual parameters) in the filter chain:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;anon&lt;/code&gt;: immediately allows access to the path without performing security checks of any kind (unless you add other
filters after it in the chain).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;authc&lt;/code&gt;: authentifies the subject using the request params (&lt;code&gt;username&lt;/code&gt; and &lt;code&gt;password&lt;/code&gt;). This can be used for form
authentication.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;authcBasic&lt;/code&gt;: triggers and checks a Basic authentication.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cert&lt;/code&gt;: extracts the certificates found by the JEE server and provides them to a &lt;code&gt;X509CertificateRealm&lt;/code&gt;. You can specify
the &lt;code&gt;optional&lt;/code&gt; parameter to allow the request even if certificate authentication fails: &lt;code&gt;cert[optional]&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;logout&lt;/code&gt;: logouts the current Subject. Note that it will clear the subject session and will invalidate the corresponding
security caches. Note that basic authentication credentials are kept by user-agents (like browsers), meaning that
authentication will automatically happen again during the next request.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;noSessionCreation&lt;/code&gt;: will prevent the creation of a security session.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;perms&lt;/code&gt;: checks for the permission specified as a parameter. Only allows access if the current subject has the
specified permission. Multiple permissions can be specified with commas: &lt;code&gt;perms[users:delete, cache:invalidate]&lt;/code&gt; for
instance.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;port&lt;/code&gt;: requires the request to be on the specified port: &lt;code&gt;port[8080]&lt;/code&gt; for instance.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rest&lt;/code&gt;: similar to the &lt;code&gt;perms&lt;/code&gt; filter but appends a CRUD verb derived from the HTTP method to the specified permission(s).
For instance, &lt;code&gt;rest[users]&lt;/code&gt; will check the following permissions depending on the HTTP verb:

&lt;ul&gt;
&lt;li&gt;DELETE checks for the &lt;code&gt;users:delete&lt;/code&gt; permission,&lt;/li&gt;
&lt;li&gt;GET checks for the &lt;code&gt;users:read&lt;/code&gt; permission,&lt;/li&gt;
&lt;li&gt;HEAD checks for the &lt;code&gt;users:read&lt;/code&gt; permission,&lt;/li&gt;
&lt;li&gt;OPTIONS checks for the &lt;code&gt;users:read&lt;/code&gt; permission,&lt;/li&gt;
&lt;li&gt;POST checks for the &lt;code&gt;users:create&lt;/code&gt; permission,&lt;/li&gt;
&lt;li&gt;PUT checks for the &lt;code&gt;users:update&lt;/code&gt; permission,&lt;/li&gt;
&lt;li&gt;TRACE checks for the &lt;code&gt;users:read&lt;/code&gt; permission.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;roles&lt;/code&gt;: checks that the subject has the specified role(s). Only allows access if current subject has &lt;strong&gt;all&lt;/strong&gt; the
specified roles. Multiple roles can be specified with commas: &lt;code&gt;roles[manager, admin]&lt;/code&gt; for instance.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ssl&lt;/code&gt;: Only allows access if the request is on port 443 and &lt;code&gt;ServletRequest.isSecure()&lt;/code&gt; returns true.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;user&lt;/code&gt;: Only allows access if the user is identified.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;custom-filters&#34;&gt;Custom filters&lt;/h3&gt;

&lt;p&gt;You can define you own custom security filters by creating a class implementing &lt;code&gt;&lt;span data-toggle=&#34;tooltip&#34; data-html=&#34;true&#34; title=&#39;javax.&amp;amp;#8203;servlet.&amp;amp;#8203;Filter&#39;&gt;Filter&lt;/span&gt;&lt;/code&gt; and
annotating it with &lt;code&gt;&lt;a data-toggle=&#34;tooltip&#34; data-html=&#34;true&#34; title=&#39;org.&amp;amp;#8203;seedstack.&amp;amp;#8203;seed.&amp;amp;#8203;web.&amp;amp;#8203;security.&amp;amp;#8203;SecurityFilter&#39; href=&#39;http://seedstack.org/javadoc/org/seedstack/seed/web/security/SecurityFilter.html&#39;&gt;@SecurityFilter&lt;/a&gt;&lt;/code&gt;. The annotation value will define
the name of the filter that can be used in filter chains.&lt;/p&gt;

&lt;p&gt;As an example, consider a filter that always returns HTTP response code 418:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;@SecurityFilter(&amp;quot;teapot&amp;quot;)
public class TeapotFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest request, 
                         ServletResponse response, 
                         FilterChain chain) throws IOException, ServletException {
        ((HttpServletResponse)response).sendError(418);
    }

    @Override
    public void destroy() {
    }

}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can use it in filter chains like this:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[org.seedstack.seed.security.urls]
/teapot = teapot
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;When a subject access the &lt;code&gt;/teapot&lt;/code&gt; URL, an HTTP response code 418 will be returned. To create advanced security filters,
you can extend existing Shiro security filters, or use them as models.&lt;/p&gt;

&lt;h2 id=&#34;example&#34;&gt;Example&lt;/h2&gt;

&lt;p&gt;Consider the following example:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[org.seedstack.seed.security.urls]
/resources/** = anon
/rest/users = ssl, authcBasic, rest[users]
/rest/** = authcBasic, roles[normal]
/** = authcBasic
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Note that:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Anything served under &lt;code&gt;/resource/**&lt;/code&gt; can be accessed anonymously.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;/rest/users&lt;/code&gt; resource can only be accessed by authenticated subjects in HTTPS with the &lt;code&gt;users:action&lt;/code&gt; permission,
where action is dependent upon the HTTP method used (see the &lt;code&gt;rest&lt;/code&gt; filter definition for details).&lt;/li&gt;
&lt;li&gt;Anything served under &lt;code&gt;/rest/**&lt;/code&gt; can only be accessed by authenticated subjects with the &lt;code&gt;normal&lt;/code&gt; application-role.&lt;/li&gt;
&lt;li&gt;All others URLs can only be accessed by authenticated subjects.&lt;/li&gt;
&lt;li&gt;In this example, authentication is handled with the Basic Authentication scheme.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;servlets-and-filters&#34;&gt;Servlets and Filters&lt;/h1&gt;

&lt;p&gt;You can register a servlet and its mappings automatically by annotating your servlet class with &lt;code&gt;&lt;span data-toggle=&#34;tooltip&#34; data-html=&#34;true&#34; title=&#39;javax.&amp;amp;#8203;servlet.&amp;amp;#8203;annotation.&amp;amp;#8203;WebServlet&#39;&gt;WebServlet&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;@WebServlet(&amp;quot;/myservlet/*&amp;quot;)
public class MyServlet extends HttpServlet {
    ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Similarly, you can register a filter and its mappings automatically by annotating your servlet class with &lt;code&gt;&lt;span data-toggle=&#34;tooltip&#34; data-html=&#34;true&#34; title=&#39;javax.&amp;amp;#8203;servlet.&amp;amp;#8203;annotation.&amp;amp;#8203;WebFilter&#39;&gt;WebFilter&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;@WebFilter(&amp;quot;/myfilter/*&amp;quot;)
public class MyFilter implements Filter {
    ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;static-resources&#34;&gt;Static resources&lt;/h1&gt;

&lt;p&gt;Seed provides automatic static resource serving from the classpath and the document root with some benefits over the container
default resource serving:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Automatic serving of pre-minified and/or pre-gzipped versions of resources,&lt;/li&gt;
&lt;li&gt;On-the-fly gzipping of resources,&lt;/li&gt;
&lt;li&gt;Cache friendly,&lt;/li&gt;
&lt;li&gt;Emulation of servlet 3.0 serving from classpath when not available.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&#34;callout callout-info&#34;&gt;
    &lt;div style=&#34;display:table; width: 100%&#34;&gt;
        &lt;div style=&#34;display:table-cell; width: 50px; vertical-align: middle;&#34;&gt;
            
            
                &lt;i class=&#34;fa fa-info-circle icon-2x&#34; style=&#34;line-height: 30px;&#34;&gt;&lt;/i&gt;
            
            
            
        &lt;/div&gt;
        &lt;div style=&#34;display:table-cell; vertical-align: middle;&#34;&gt;
            &lt;p&gt;Static resource serving is enabled by default. It has a low priority
Docroot resources always have precedence over classpath resources. If a file under document root leads to the same resulting
path as in classpath, then the document root file have priority (like robots.txt in above example).&lt;/p&gt;

        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;default-behavior&#34;&gt;Default behavior&lt;/h2&gt;

&lt;p&gt;The default behavior is to serve resources located under the document root folder and, if not found, under the
&lt;code&gt;META-INF/resources&lt;/code&gt; classpath location on the &lt;code&gt;/*&lt;/code&gt; path. For example, consider the following folder tree:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docroot/
    index.html
    robots.txt

META-INF/
    resources/
        robots.txt
        lib/
            jquery.js
            jquery.min.js
            jquery.min.js.gz
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The default behavior is to serve index.html, robots.txt and jquery.js on the following paths:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/robots.txt
/index.html
/lib/jquery.js
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The jquery.js file will be served as a minified and gzipped version (without the overhead of on-the-fly gzipping since
a pre-gzipped version is already available).&lt;/p&gt;

&lt;div class=&#34;callout callout-info&#34;&gt;
    &lt;div style=&#34;display:table; width: 100%&#34;&gt;
        &lt;div style=&#34;display:table-cell; width: 50px; vertical-align: middle;&#34;&gt;
            
            
                &lt;i class=&#34;fa fa-info-circle icon-2x&#34; style=&#34;line-height: 30px;&#34;&gt;&lt;/i&gt;
            
            
            
        &lt;/div&gt;
        &lt;div style=&#34;display:table-cell; vertical-align: middle;&#34;&gt;
            &lt;p&gt;Docroot resources always have precedence over classpath resources. If a file under document root leads to the same resulting
path as in classpath, then the document root file have priority (like robots.txt in above example).&lt;/p&gt;

        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;configuration&#34;&gt;Configuration&lt;/h2&gt;

&lt;p&gt;Resources are always served on &lt;code&gt;/*&lt;/code&gt; with a low priority&lt;/p&gt;

&lt;p&gt;The default serving path can be altered. For example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;org.seedstack.seed.web.resources.path = /my-custom-resource-path
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The serving paths then are updated by appending &lt;code&gt;/my-custom-resource-path&lt;/code&gt; to the document root base path and the
&lt;code&gt;META-INF/resources&lt;/code&gt; classpath location thus serving from respective following paths:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;docroot/my-custom-resource-path&lt;/code&gt; for document root based resources&lt;/li&gt;
&lt;li&gt;&lt;code&gt;META-INF/resources/my-custom-resource-path&lt;/code&gt; for classpath based resources&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Note that specifying an empty resource path would mean that resources are served directly under the application context root.
In that case the webapp must be dedicated to serving web resources since it will not be able to register additional
servlets (&lt;code&gt;/*&lt;/code&gt; will be reserved for web resources).&lt;/p&gt;

&lt;h2 id=&#34;minification-and-gzip-support&#34;&gt;Minification and gzip support&lt;/h2&gt;

&lt;p&gt;The file extension is determined from the requested URL as the characters&amp;rsquo; sequence after the last dot &lt;code&gt;.&lt;/code&gt; of the
hierarchical part. For instance &lt;code&gt;js&lt;/code&gt; extension would be retrieved from:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-plain&#34;&gt;http://myapplication/resources/lib/jquery.js
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If minification support is enabled and a file with a &lt;code&gt;min.&lt;/code&gt; prefixed extension is found, then it is used instead of the
originally requested file In below example, the last file would be served:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-plain&#34;&gt;/resources/lib/jquery.js
/resources/lib/jquery.min.js
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If gzip support is enabled and the browser accepts gzip encoding and a file with a &lt;code&gt;.gzip&lt;/code&gt; suffixed extension is found,
then it is used instead of the originally requested file (or instead of the minified file determined in the previous step):&lt;/p&gt;

&lt;p&gt;For instance, in below example, the last file would be served:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-plain&#34;&gt;/resources/lib/jquery.js
/resources/lib/jquery.min.js
/resources/lib/jquery.js.gzip
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If no gzipped version has been found but on-the-fly gzip support is enabled, the resource will be gzipped in-memory for
serving. To control the minification and gzip behavior, use the following properties:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;org.seedstack.seed.web.resources.minification-support = true | false
org.seedstack.seed.web.resources.gzip-support = true | false
org.seedstack.seed.web.resources.gzip-on-the-fly = true | false
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;mime-types&#34;&gt;MIME types&lt;/h2&gt;

&lt;p&gt;The following MIME types are automatically derived from extensions:&lt;/p&gt;

&lt;table class=&#34;table table-striped&#34;&gt;
&lt;tr&gt;&lt;th&gt;Mime type&lt;/th&gt;&lt;th&gt;Extensions&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;text/html&lt;/td&gt;&lt;td&gt;html htm HTML HTM&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;text/plain&lt;/td&gt;&lt;td&gt;txt text TXT TEXT&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;text/javascript&lt;/td&gt;&lt;td&gt;js JS&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;text/css&lt;/td&gt;&lt;td&gt;css less CSS LESS&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;image/gif&lt;/td&gt;&lt;td&gt;gif GIF&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;image/jpeg&lt;/td&gt;&lt;td&gt;jpeg jpg jpe JPEG JPG JPE&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;image/png&lt;/td&gt;&lt;td&gt;png PNG&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;image/vnd.microsoft.icon&lt;/td&gt;&lt;td&gt;ico ICO&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;application/pdf&lt;/td&gt;&lt;td&gt;pdf PDF&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;application/json&lt;/td&gt;&lt;td&gt;json JSON&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;application/font-woff&lt;/td&gt;&lt;td&gt;woff WOFF&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;application/vnd.ms-fontobject&lt;/td&gt;&lt;td&gt;eot EOT&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;font/truetype&lt;/td&gt;&lt;td&gt;ttf TTF&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;font/opentype&lt;/td&gt;&lt;td&gt;otf OTF&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;

&lt;h2 id=&#34;caching&#34;&gt;Caching&lt;/h2&gt;

&lt;p&gt;Resource information is determined by calls to classloader &lt;code&gt;getResource()&lt;/code&gt; for classpath locations and by calls to
&lt;code&gt;File.canRead()&lt;/code&gt; for docroot locations. The number of these calls per resource lookup can increase when:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Using multiple locations (classpath or docroot based), in which case the lookup logic is invoked for each location.&lt;/li&gt;
&lt;li&gt;Using minification and gzip support, in which case the lookup logic itself is more costly trying to find
the resource in the following order :&lt;br /&gt;

&lt;ul&gt;
&lt;li&gt;gzipped minified version&lt;/li&gt;
&lt;li&gt;gzipped version&lt;/li&gt;
&lt;li&gt;minified version&lt;/li&gt;
&lt;li&gt;normal version&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;A built-in cache is used to improve the lookup performance of resources that were served at least one time. You can
alter the cache properties as follows (below example with default values):&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;org.seedstack.seed.web.resources.cache.max-size = 8192
org.seedstack.seed.web.resources.cache.concurrency = 32
org.seedstack.seed.web.resources.cache.initial-size = 2048
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you don&amp;rsquo;t specify the initial-size configuration property, it will be set at &lt;code&gt;max-size / 4&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&#34;cors&#34;&gt;CORS&lt;/h1&gt;

&lt;p&gt;Cross-Origin Resource Sharing (CORS) is supported through a Java filter and can be enabled in any Seed application.&lt;/p&gt;

&lt;div class=&#34;callout callout-info&#34;&gt;
    &lt;div style=&#34;display:table; width: 100%&#34;&gt;
        &lt;div style=&#34;display:table-cell; width: 50px; vertical-align: middle;&#34;&gt;
            
            
                &lt;i class=&#34;fa fa-info-circle icon-2x&#34; style=&#34;line-height: 30px;&#34;&gt;&lt;/i&gt;
            
            
            
        &lt;/div&gt;
        &lt;div style=&#34;display:table-cell; vertical-align: middle;&#34;&gt;
            &lt;p&gt;Seed integrates the CORS filter from &lt;a href=&#34;http://software.dzhuvinov.com/cors-filter.html&#34;&gt;dzhuvinov software&lt;/a&gt;. There is no
need to install and configure the filter manually, it is automatically registered by Seed. All filter options can be
specified through configuration properties.&lt;/p&gt;

        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;configuration-1&#34;&gt;Configuration&lt;/h2&gt;

&lt;p&gt;To enable CORS support just add the following configuration to your application:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;org.seedstack.seed.web.cors.enabled = true
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;filter-properties&#34;&gt;Filter properties&lt;/h2&gt;

&lt;p&gt;The CORS filter allows to alter its default behavior with various parameters. The filter documentation enumerates all
configuration parameters. Seed can transform any configuration property prefixed with &lt;code&gt;org.seedstack.seed.web.cors.property&lt;/code&gt;
to the corresponding filter parameter. For instance, to specify the recognized verbs, you can use the following configuration:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[org.seedstack.seed.web.cors.property]
supportedMethods= GET\\, POST\\, HEAD\\, OPTIONS\\, PUT\\, DELETE
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This configuration property is automatically translated to the &lt;code&gt;cors.supportedMethods&lt;/code&gt; filter parameter found in the
documentation. Note that the escaping of the commas is required to inhibit Seed from parsing this value as a list.&lt;/p&gt;

&lt;div class=&#34;callout callout-info&#34;&gt;
    &lt;div style=&#34;display:table; width: 100%&#34;&gt;
        &lt;div style=&#34;display:table-cell; width: 50px; vertical-align: middle;&#34;&gt;
            
            
                &lt;i class=&#34;fa fa-info-circle icon-2x&#34; style=&#34;line-height: 30px;&#34;&gt;&lt;/i&gt;
            
            
            
        &lt;/div&gt;
        &lt;div style=&#34;display:table-cell; vertical-align: middle;&#34;&gt;
            &lt;p&gt;Please refer to this page of the &lt;a href=&#34;http://software.dzhuvinov.com/cors-filter-configuration.html&#34;&gt;filter documentation&lt;/a&gt;
for a complete list of configuration parameters.&lt;/p&gt;

        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;h1 id=&#34;websockets&#34;&gt;WebSockets&lt;/h1&gt;

&lt;p&gt;Seed also integrates the Java API for WebSocket (JSR 356), allowing server and client endpoints to be injected. WebSocket
support requires Java 7 and a compatible server to work.&lt;/p&gt;

&lt;h2 id=&#34;server-endpoints&#34;&gt;Server endpoints&lt;/h2&gt;

&lt;p&gt;No specific configuration is required for server endpoint. Just declare a standard JSR 356 endpoint:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;@ServerEndpoint(value = &amp;quot;/chat&amp;quot;)
public class ChatEndpoint {

    @Logging
    private Logger logger;

    @Inject
    EchoService echoService;

    @OnOpen
    public void onOpen(Session session) {
        logger.info(&amp;quot;Connected ... &amp;quot; + session.getId());
    }

    @OnMessage
    public void message(String message, 
                        Session client) throws IOException, EncodeException {
        for (Session peer : client.getOpenSessions()) {
            peer.getBasicRemote().sendText(echoService.echo(message));
        }
    }

    @OnClose
    public void onClose(Session session, CloseReason closeReason) {
        logger.info(String.format(&amp;quot;Session %s close because of %s&amp;quot;, 
            session.getId(), closeReason));
    }

    @OnError
    public void onError(Session session, Throwable t) {
        logger.error(t.getMessage, t);
    }

}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In this example, the endpoint receives a message and then broadcast it to all clients.&lt;/p&gt;

&lt;h2 id=&#34;client-endpoints&#34;&gt;Client endpoints&lt;/h2&gt;

&lt;p&gt;Unlike server endpoints, client endpoints have to explicitly specify a &lt;code&gt;SeedClientEndpointConfigurator&lt;/code&gt; in order to be
managed by Seed.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;@ClientEndpoint(configurator = SeedClientEndpointConfigurator.class)
public class ChatClientEndpoint1 {
    public static final String TEXT = &amp;quot;Client1 joins&amp;quot;;
    public static CountDownLatch latch;
    public static String response;

    @OnOpen
    public void onOpen(Session session) {
        try {
            session.getBasicRemote().sendText(TEXT);
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }

    @OnMessage
    public void processMessage(String message) {
        response = message;
        latch.countDown();
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;testing&#34;&gt;Testing&lt;/h2&gt;

&lt;p&gt;You can test WebSocket endpoints with &lt;a href=&#34;http://seedstack.org/archives/16.7/docs/seed/manual/testing/&#34;&gt;Seed Web integration testing&lt;/a&gt;. Here is an example which tests two
client endpoints:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public class WebSocketIT extends AbstractSeedWebIT {

    @Logging
    private Logger logger;

    @Inject
    ChatClientEndpoint1 chatClientEndpoint1;

    @Inject
    ChatClientEndpoint2 chatClientEndpoint2;

    @Deployment
    public static WebArchive createDeployment() {
        return ShrinkWrap.create(WebArchive.class);
    }

    @Test
    @RunAsClient
    public void communication_is_working(@ArquillianResource URL baseUrl) throws Exception {
        ChatClientEndpoint1.latch = new CountDownLatch(1);

        final Session session1 = connectToServer(baseUrl, chatClientEndpoint1);
        assertNotNull(session1);

        assertTrue(ChatClientEndpoint1.latch.await(2, TimeUnit.SECONDS));
        assertEquals(&amp;quot;echo: &amp;quot; + ChatClientEndpoint1.TEXT, ChatClientEndpoint1.response);

        ChatClientEndpoint1.latch = new CountDownLatch(1);
        ChatClientEndpoint2.latch = new CountDownLatch(1);

        final Session session2 = connectToServer(baseUrl, chatClientEndpoint2);
        assertNotNull(session2);

        assertTrue(ChatClientEndpoint1.latch.await(2, TimeUnit.SECONDS));
        assertTrue(ChatClientEndpoint2.latch.await(2, TimeUnit.SECONDS));
        assertEquals(&amp;quot;echo: &amp;quot; + ChatClientEndpoint2.TEXT, ChatClientEndpoint1.response);
        assertEquals(&amp;quot;echo: &amp;quot; + ChatClientEndpoint2.TEXT, ChatClientEndpoint2.response);
    }

    private Session connectToServer(URL baseUrl, Object endpoint) {
        try {
        WebSocketContainer container = ContainerProvider.getWebSocketContainer();
        URI uri = new URI(&amp;quot;ws://&amp;quot; + baseUrl.getHost() + &amp;quot;:&amp;quot; + baseUrl.getPort()
            + baseUrl.getPath() + &amp;quot;chat&amp;quot;);
        return container.connectToServer(endpoint, uri);
        } catch(Exception e) {
            logger.error(e.getMessage(), e);
            fail();
        }
    }

}
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
  </channel>
</rss>